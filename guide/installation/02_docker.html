<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.26">
    <script>if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) { window.document.querySelector('html').classList.add('dark');} </script><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" color="#ffc135" href="/safari-pinned-tab.svg"><meta name="msapplication-TileColor" content="#ffc135"><meta name="theme-color" content="#ffc135"><title>Docker | Zigbee2MQTT</title><meta name="description" content="Zigbee to MQTT bridge, get rid of your proprietary Zigbee bridges">
    <link rel="preload" href="/assets/js/runtime~app.25f6b4ea.js" as="script"><link rel="preload" href="/assets/css/styles.dc050e6c.css" as="style"><link rel="preload" href="/assets/js/84280.6395e0e8.js" as="script"><link rel="preload" href="/assets/js/app.edcd43a5.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.dc050e6c.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container content-page"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/logo.png" alt="Zigbee2MQTT"><span class="site-name can-hide">Zigbee2MQTT</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/guide/getting-started/" class="nav-link" aria-label="Getting started"><!--[--><!--]--> Getting started <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/adapters/" class="nav-link" aria-label="Supported Adapters"><!--[--><!--]--> Supported Adapters <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/supported-devices/" class="nav-link" aria-label="Supported Devices"><!--[--><!--]--> Supported Devices <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/installation/" class="nav-link router-link-active" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/configuration/" class="nav-link" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/usage/pairing_devices.md" class="nav-link" aria-label="Usage"><!--[--><!--]--> Usage <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/faq/" class="nav-link" aria-label="FAQ"><!--[--><!--]--> FAQ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/supported-devices/" class="nav-link" aria-label="Devices"><!--[--><!--]--> Devices <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Advanced"><span class="title">Advanced</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Advanced"><span class="title">Advanced</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Zigbee</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/advanced/zigbee/01_zigbee_network.html" class="nav-link" aria-label="Zigbee network"><!--[--><!--]--> Zigbee network <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/zigbee/02_improve_network_range_and_stability.html" class="nav-link" aria-label="Improve network range and stability"><!--[--><!--]--> Improve network range and stability <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/zigbee/03_secure_network.html" class="nav-link" aria-label="Secure your Zigbee network"><!--[--><!--]--> Secure your Zigbee network <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/zigbee/04_sniff_zigbee_traffic.html" class="nav-link" aria-label="Sniff Zigbee traffic"><!--[--><!--]--> Sniff Zigbee traffic <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/zigbee/05_create_a_cc2530_router.html" class="nav-link" aria-label="Create a CC2530 router"><!--[--><!--]--> Create a CC2530 router <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Support new devices</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/advanced/support-new-devices/01_support_new_devices.html" class="nav-link" aria-label="Support new devices"><!--[--><!--]--> Support new devices <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/support-new-devices/02_support_new_tuya_devices.html" class="nav-link" aria-label="Support new Tuya devices"><!--[--><!--]--> Support new Tuya devices <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/support-new-devices/03_find_tuya_data_points.html" class="nav-link" aria-label="Find Tuya Data Points"><!--[--><!--]--> Find Tuya Data Points <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Remote Adapter</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/advanced/remote-adapter/connect_to_a_remote_adapter.html" class="nav-link" aria-label="Connect to a remote adapter"><!--[--><!--]--> Connect to a remote adapter <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/remote-adapter/connect_to_a_remote_sonoff_zbbridge.html" class="nav-link" aria-label="Connect to a remote Sonoff ZBBridge"><!--[--><!--]--> Connect to a remote Sonoff ZBBridge <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>More</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/advanced/more/3d_cases.html" class="nav-link" aria-label="3D cases"><!--[--><!--]--> 3D cases <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/more/switch-to-dev-branch.html" class="nav-link" aria-label="Switch to the dev branch"><!--[--><!--]--> Switch to the dev branch <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/more/tuya_xiaomi_ota_url.html" class="nav-link" aria-label="Get Tuya and Xiaomi OTA url"><!--[--><!--]--> Get Tuya and Xiaomi OTA url <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/more/user_extensions.html" class="nav-link" aria-label="User extensions"><!--[--><!--]--> User extensions <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Support"><span class="title">Support</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Support"><span class="title">Support</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt/discussions" rel="noopener noreferrer" target="_blank" aria-label="Forum"><!--[--><!--]--> Forum <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://discord.gg/NyseBeK" rel="noopener noreferrer" target="_blank" aria-label="Discord"><!--[--><!--]--> Discord <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt/issues" rel="noopener noreferrer" target="_blank" aria-label="Issues"><!--[--><!--]--> Issues <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt" rel="noopener noreferrer" target="_blank" aria-label="Donate"><!--[--><!--]--> Donate <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/guide/getting-started/" class="nav-link" aria-label="Getting started"><!--[--><!--]--> Getting started <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/adapters/" class="nav-link" aria-label="Supported Adapters"><!--[--><!--]--> Supported Adapters <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/supported-devices/" class="nav-link" aria-label="Supported Devices"><!--[--><!--]--> Supported Devices <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/installation/" class="nav-link router-link-active" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/configuration/" class="nav-link" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/usage/pairing_devices.md" class="nav-link" aria-label="Usage"><!--[--><!--]--> Usage <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/guide/faq/" class="nav-link" aria-label="FAQ"><!--[--><!--]--> FAQ <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a href="/supported-devices/" class="nav-link" aria-label="Devices"><!--[--><!--]--> Devices <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Advanced"><span class="title">Advanced</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Advanced"><span class="title">Advanced</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Zigbee</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/advanced/zigbee/01_zigbee_network.html" class="nav-link" aria-label="Zigbee network"><!--[--><!--]--> Zigbee network <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/zigbee/02_improve_network_range_and_stability.html" class="nav-link" aria-label="Improve network range and stability"><!--[--><!--]--> Improve network range and stability <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/zigbee/03_secure_network.html" class="nav-link" aria-label="Secure your Zigbee network"><!--[--><!--]--> Secure your Zigbee network <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/zigbee/04_sniff_zigbee_traffic.html" class="nav-link" aria-label="Sniff Zigbee traffic"><!--[--><!--]--> Sniff Zigbee traffic <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/zigbee/05_create_a_cc2530_router.html" class="nav-link" aria-label="Create a CC2530 router"><!--[--><!--]--> Create a CC2530 router <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Support new devices</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/advanced/support-new-devices/01_support_new_devices.html" class="nav-link" aria-label="Support new devices"><!--[--><!--]--> Support new devices <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/support-new-devices/02_support_new_tuya_devices.html" class="nav-link" aria-label="Support new Tuya devices"><!--[--><!--]--> Support new Tuya devices <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/support-new-devices/03_find_tuya_data_points.html" class="nav-link" aria-label="Find Tuya Data Points"><!--[--><!--]--> Find Tuya Data Points <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>Remote Adapter</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/advanced/remote-adapter/connect_to_a_remote_adapter.html" class="nav-link" aria-label="Connect to a remote adapter"><!--[--><!--]--> Connect to a remote adapter <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/remote-adapter/connect_to_a_remote_sonoff_zbbridge.html" class="nav-link" aria-label="Connect to a remote Sonoff ZBBridge"><!--[--><!--]--> Connect to a remote Sonoff ZBBridge <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>More</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/advanced/more/3d_cases.html" class="nav-link" aria-label="3D cases"><!--[--><!--]--> 3D cases <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/more/switch-to-dev-branch.html" class="nav-link" aria-label="Switch to the dev branch"><!--[--><!--]--> Switch to the dev branch <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/more/tuya_xiaomi_ota_url.html" class="nav-link" aria-label="Get Tuya and Xiaomi OTA url"><!--[--><!--]--> Get Tuya and Xiaomi OTA url <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/advanced/more/user_extensions.html" class="nav-link" aria-label="User extensions"><!--[--><!--]--> User extensions <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Support"><span class="title">Support</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Support"><span class="title">Support</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt/discussions" rel="noopener noreferrer" target="_blank" aria-label="Forum"><!--[--><!--]--> Forum <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://discord.gg/NyseBeK" rel="noopener noreferrer" target="_blank" aria-label="Discord"><!--[--><!--]--> Discord <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt/issues" rel="noopener noreferrer" target="_blank" aria-label="Issues"><!--[--><!--]--> Issues <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><li class="dropdown-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt" rel="noopener noreferrer" target="_blank" aria-label="Donate"><!--[--><!--]--> Donate <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Koenkk/zigbee2mqtt.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/guide/getting-started/" class="nav-link sidebar-heading sidebar-item" aria-label="Getting started"><!--[--><!--]--> Getting started <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/guide/supported-hardware.md" class="nav-link sidebar-heading sidebar-item" aria-label="Supported Hardware"><!--[--><!--]--> Supported Hardware <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/guide/adapters/" class="nav-link sidebar-item" aria-label="Adapters"><!--[--><!--]--> Adapters <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/supported-devices/" class="nav-link sidebar-item" aria-label="Devices"><!--[--><!--]--> Devices <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/guide/installation/" class="nav-link router-link-active sidebar-heading sidebar-item active" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/guide/installation/01_linux.html" class="nav-link sidebar-item" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Docker"><!--[--><!--]--> Docker <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#creating-the-initial-configuration" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Creating the initial configuration"><!--[--><!--]--> Creating the initial configuration <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#running-the-container" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Running the container"><!--[--><!--]--> Running the container <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#rootless-container" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Rootless container"><!--[--><!--]--> Rootless container <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#updating" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Updating"><!--[--><!--]--> Updating <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#tags" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Tags"><!--[--><!--]--> Tags <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#docker-compose" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Docker Compose"><!--[--><!--]--> Docker Compose <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#starting-the-container" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Starting the container"><!--[--><!--]--> Starting the container <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#updating-1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Updating"><!--[--><!--]--> Updating <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#notes-for-raspberry-pi-users" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Notes for Raspberry Pi users"><!--[--><!--]--> Notes for Raspberry Pi users <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#docker-stack-device-mapping" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Docker Stack device mapping"><!--[--><!--]--> Docker Stack device mapping <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#troubleshooting" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Troubleshooting"><!--[--><!--]--> Troubleshooting <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/guide/installation/02_docker.html#docker-on-synology-dsm-7-0" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Docker on Synology DSM 7.0"><!--[--><!--]--> Docker on Synology DSM 7.0 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/guide/installation/03_ha_addon.html" class="nav-link sidebar-item" aria-label="Home Assistant addon"><!--[--><!--]--> Home Assistant addon <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/installation/04_openhabian.html" class="nav-link sidebar-item" aria-label="openHABian"><!--[--><!--]--> openHABian <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/installation/05_windows.html" class="nav-link sidebar-item" aria-label="Windows"><!--[--><!--]--> Windows <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/installation/06_freebsd_jail.html" class="nav-link sidebar-item" aria-label="FreeBSD jail"><!--[--><!--]--> FreeBSD jail <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/installation/07_python_virtual_environment.html" class="nav-link sidebar-item" aria-label="Python Virtual Environment"><!--[--><!--]--> Python Virtual Environment <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/installation/20_zigbee2mqtt-fails-to-start.html" class="nav-link sidebar-item" aria-label="Zigbee2MQTT fails to start"><!--[--><!--]--> Zigbee2MQTT fails to start <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/guide/configuration/" class="nav-link sidebar-heading sidebar-item" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/guide/configuration/adapter-settings.html" class="nav-link sidebar-item" aria-label="Adapter settings"><!--[--><!--]--> Adapter settings <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/mqtt.html" class="nav-link sidebar-item" aria-label="MQTT"><!--[--><!--]--> MQTT <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/zigbee-network.html" class="nav-link sidebar-item" aria-label="Zigbee network"><!--[--><!--]--> Zigbee network <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/frontend.html" class="nav-link sidebar-item" aria-label="Frontend"><!--[--><!--]--> Frontend <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/devices-groups.html" class="nav-link sidebar-item" aria-label="Devices and Groups"><!--[--><!--]--> Devices and Groups <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/logging.html" class="nav-link sidebar-item" aria-label="Logging"><!--[--><!--]--> Logging <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/block-pass-list.html" class="nav-link sidebar-item" aria-label="Device blocklist / passlist"><!--[--><!--]--> Device blocklist / passlist <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/ota-device-updates.html" class="nav-link sidebar-item" aria-label="OTA device firmware update"><!--[--><!--]--> OTA device firmware update <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/device-availability.html" class="nav-link sidebar-item" aria-label="Device-Availability"><!--[--><!--]--> Device-Availability <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/homeassistant.html" class="nav-link sidebar-item" aria-label="Home Assistant integration"><!--[--><!--]--> Home Assistant integration <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/configuration/more-config-options.html" class="nav-link sidebar-item" aria-label="More configuration options"><!--[--><!--]--> More configuration options <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/guide/usage/" class="nav-link sidebar-heading sidebar-item" aria-label="Usage"><!--[--><!--]--> Usage <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/guide/usage/pairing_devices.html" class="nav-link sidebar-item" aria-label="Allowing devices to join"><!--[--><!--]--> Allowing devices to join <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/usage/integrations.html" class="nav-link sidebar-item" aria-label="Integrations"><!--[--><!--]--> Integrations <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/usage/touchlink.html" class="nav-link sidebar-item" aria-label="Touchlink"><!--[--><!--]--> Touchlink <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/usage/scenes.html" class="nav-link sidebar-item" aria-label="Scenes"><!--[--><!--]--> Scenes <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/usage/binding.html" class="nav-link sidebar-item" aria-label="Binding"><!--[--><!--]--> Binding <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/usage/groups.html" class="nav-link sidebar-item" aria-label="Groups"><!--[--><!--]--> Groups <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/usage/ota_updates.html" class="nav-link sidebar-item" aria-label="OTA updates"><!--[--><!--]--> OTA updates <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/usage/mqtt_topics_and_messages.html" class="nav-link sidebar-item" aria-label="MQTT Topics and Messages"><!--[--><!--]--> MQTT Topics and Messages <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/usage/exposes.html" class="nav-link sidebar-item" aria-label="Exposes"><!--[--><!--]--> Exposes <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/guide/usage/debug.html" class="nav-link sidebar-item" aria-label="Debug"><!--[--><!--]--> Debug <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/guide/faq/" class="nav-link sidebar-heading sidebar-item" aria-label="FAQ"><!--[--><!--]--> FAQ <!--[--><!--]--></a><!----><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> Docker</h1><p>It is possible to run Zigbee2MQTT in a Docker container using the official <a href="https://hub.docker.com/r/koenkk/zigbee2mqtt/" target="_blank" rel="noopener noreferrer">Zigbee2MQTT Docker image<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>This image support the following architectures: <code>386</code>, <code>amd64</code>, <code>arm/v6</code>, <code>arm/v7</code>, <code>arm64</code>. Since Zigbee2MQTT images are manifest listed, Docker will auto-detect the architecture and pull the right image.</p><p>Start by figuring out the location of your adapter as explained <a href="/guide/installation/01_linux.html#determine-location-of-the-adapter-and-checking-user-permissions" class="">here</a>.</p><p><strong>IMPORTANT</strong>: Using a Raspberry Pi? Make sure to check <a href="#notes-for-raspberry-pi-users">Notes for Raspberry Pi users</a>.</p><h2 id="creating-the-initial-configuration" tabindex="-1"><a class="header-anchor" href="#creating-the-initial-configuration" aria-hidden="true">#</a> Creating the initial configuration</h2><p>Navigate to the directory where you whish to store the Zigbee2MQTT data and execute:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> https://raw.githubusercontent.com/Koenkk/zigbee2mqtt/master/data/configuration.yaml -P data
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Now configure the MQTT server, adapter location, network key and frontend as explained <a href="/guide/installation/01_linux.html#configuring" class="">here</a>.</p><h2 id="running-the-container" tabindex="-1"><a class="header-anchor" href="#running-the-container" aria-hidden="true">#</a> Running the container</h2><p>Execute the following command, update the <code>--device</code> parameter to match the location of your adapter.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">docker</span> run <span class="token punctuation">\</span>
   --name zigbee2mqtt <span class="token punctuation">\</span>
   --restart<span class="token operator">=</span>unless-stopped <span class="token punctuation">\</span>
   --device<span class="token operator">=</span>/dev/ttyACM0 <span class="token punctuation">\</span>
   -p <span class="token number">8080</span>:8080 <span class="token punctuation">\</span>
   -v <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/data:/app/data <span class="token punctuation">\</span>
   -v /run/udev:/run/udev:ro <span class="token punctuation">\</span>
   -e <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Europe/Amsterdam <span class="token punctuation">\</span>
   koenkk/zigbee2mqtt
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Parameters explanation:</strong></p><ul><li><code>--name zigbee2mqtt</code>: Name of container</li><li><code>--restart=unless-stopped</code>: Automatically start on boot and restart after a crash</li><li><code>--device=/dev/ttyACM0</code>: Location of adapter (e.g. CC2531)</li><li><code>-v $(pwd)/data:/app/data</code>: Directory where Zigbee2MQTT stores it configuration (pwd maps to the current working directory)</li><li><code>-v /run/udev:/run/udev:ro</code>: only required for auto-detecting the port and some adapters like ConBee</li><li><code>-e TZ=Europe/Amsterdam</code>: Configure the timezone</li><li><code>-p 8080:8080</code>: port forwarding from inside Docker container to host (for the frontend)</li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>If you run the MQTT-Server on the same host (localhost) you could use the IP of the <code>docker0</code> bridge to establish the connection: <code>server: mqtt://172.17.0.1</code>.</p></div><h3 id="rootless-container" tabindex="-1"><a class="header-anchor" href="#rootless-container" aria-hidden="true">#</a> Rootless container</h3><p>To improve the security of the deployment you may want to run Zigbee2MQTT as a <em>non-root</em> user.</p><ol><li>Identify the group that has access to the adapter (in Ubuntu, e.g. it might be assigned to <code>dialout</code>). Update <code>ttyACM0</code> to match your adapter location.</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ ls -l /dev/ttyACM0
crw-rw---- 1 root dialout 166, 0 Nov 5 16:31 /dev/ttyACM0
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>If you want to run Zigbee2MQTT using your current user find the <code>uid</code> (UserID) and <code>gid</code> (GroupID):</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ id
uid=1001(pi) gid=1001(pi) Groups=...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>Start the docker container after updating <code>device</code>, <code>user</code> (uid:gid) and <code>group-add</code>:</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ sudo docker run \
   --name=zigbee2mqtt \
   --restart=unless-stopped \
   -p 8080:8080 \
   -v $(pwd)/data:/app/data \
   -v /run/udev:/run/udev:ro \
   --device=/dev/ttyACM0 \
   --user 1001:1001 \
   --group-add dialout \
   -e TZ=Europe/Amsterdam \
   koenkk/zigbee2mqtt
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>3.1</p><p><strong>Parameters explanation:</strong></p><ul><li><code>--user 1001:1001</code>: Run the Zigbee2MQTT process within the container using the provided UserID and GroupID</li><li><code>--group-add dialout</code>: Assign the <code>dialout</code> group to the user to be able to access the device</li></ul><h2 id="updating" tabindex="-1"><a class="header-anchor" href="#updating" aria-hidden="true">#</a> Updating</h2><p>To update to the latest Docker image:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull koenkk/zigbee2mqtt:latest
<span class="token function">docker</span> <span class="token function">rm</span> -f zigbee2mqtt
<span class="token comment"># Now run the container again with the instructions above</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="tags" tabindex="-1"><a class="header-anchor" href="#tags" aria-hidden="true">#</a> Tags</h2><p>The following tags are available:</p><ul><li>Latest release version: <code>latest</code></li><li>Latest dev version (based on <a href="https://github.com/Koenkk/zigbee2mqtt/tree/dev" target="_blank" rel="noopener noreferrer"><code>dev</code><span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> branch): <code>latest-dev</code></li><li>Specific release version, e.g: <code>1.7.0</code></li></ul><h2 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose" aria-hidden="true">#</a> Docker Compose</h2><p>Example of a Docker Compose file:</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.8&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">zigbee2mqtt</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> zigbee2mqtt
    <span class="token key atrule">image</span><span class="token punctuation">:</span> koenkk/zigbee2mqtt
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./data<span class="token punctuation">:</span>/app/data
      <span class="token punctuation">-</span> /run/udev<span class="token punctuation">:</span>/run/udev<span class="token punctuation">:</span>ro
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token comment"># Frontend port</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> TZ=Europe/Berlin
    <span class="token key atrule">devices</span><span class="token punctuation">:</span>
      <span class="token comment"># Make sure this matched your adapter location</span>
      <span class="token punctuation">-</span> /dev/ttyUSB0<span class="token punctuation">:</span>/dev/ttyACM0
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>You can also run a rootless container with docker-compose by adding the required attributes to the <code>zigbee2mqtt</code> service block in your <code>docker-compose.yml</code>:</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>    <span class="token key atrule">group_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> dialout
    <span class="token key atrule">user</span><span class="token punctuation">:</span> 1000<span class="token punctuation">:</span><span class="token number">1000</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="starting-the-container" tabindex="-1"><a class="header-anchor" href="#starting-the-container" aria-hidden="true">#</a> Starting the container</h3><p>To start the Docker container:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> up -d zigbee2mqtt
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>You can optionally skip <code>zigbee2mqtt</code> and it will start all containers listed in the compose file.</p><h3 id="updating-1" tabindex="-1"><a class="header-anchor" href="#updating-1" aria-hidden="true">#</a> Updating</h3><p>To update to the latest Docker image:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker-compose</span> pull zigbee2mqtt
<span class="token function">docker-compose</span> up -d zigbee2mqtt
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>You can optionally skip <code>zigbee2mqtt</code> and it will pull any new images for all containers in the compose file, and then restart those that were updated.</p><h2 id="notes-for-raspberry-pi-users" tabindex="-1"><a class="header-anchor" href="#notes-for-raspberry-pi-users" aria-hidden="true">#</a> Notes for Raspberry Pi users</h2><ul><li>If you are running Raspbian Buster (not Bullseye!) (find out by executing <code>grep &quot;PRETTY_NAME&quot; /etc/os-release</code>) you need to install <code>libseccomp2</code>, this can be done by executing the following commands:</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> apt-key adv --keyserver hkps://keyserver.ubuntu.com:443 --recv-keys 04EE7237B7D453EC 648ACFD622F3D138
<span class="token builtin class-name">echo</span> <span class="token string">&quot;deb http://httpredir.debian.org/debian buster-backports main contrib non-free&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> -a <span class="token string">&quot;/etc/apt/sources.list.d/debian-backports.list&quot;</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libseccomp2 -t buster-backports
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>If you do not do this you will get the following error when starting the Zigbee2MQTT container:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#</span>
<span class="token comment"># Fatal error in , line 0</span>
<span class="token comment"># unreachable code</span>
<span class="token comment">#</span>
<span class="token comment">#</span>
<span class="token comment">#</span>
<span class="token comment">#FailureMessage Object: 0x7eace25c</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>For Raspberry Pi 1 and zero users: there is a bug in Docker which selects the wrong image architecture. Before executing <code>docker run</code> pull the correct image with <code>docker pull koenkk/zigbee2mqtt --platform linux/arm/v6</code>.</li></ul><h2 id="docker-stack-device-mapping" tabindex="-1"><a class="header-anchor" href="#docker-stack-device-mapping" aria-hidden="true">#</a> Docker Stack device mapping</h2><p><em>This is only relevant when using Docker Stack</em></p><p>Docker stack doesn&#39;t support device mappings with option <code>--devices</code> when deploying a stack in Swam mode. A workaround is to bind the device as volume binding and set the right permissions.</p><p>The workaround is based on the solution found at <a href="https://github.com/docker/swarmkit/issues/1244#issuecomment-285935430" target="_blank" rel="noopener noreferrer">Add support for devices with &quot;service create&quot;<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>, all credits goes this him.</p><ol><li><p>Identify serial adapter Identify the serial adapter using the following command:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> lsusb -v
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Bus 001 Device 005: ID 0451:16a8 Texas Instruments, Inc.
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            2 Communications
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        32
  idVendor           0x0451 Texas Instruments, Inc.
  idProduct          0x16a8
  bcdDevice            0.09
  iManufacturer           1 Texas Instruments
  iProduct                2 TI CC2531 USB CDC
  iSerial                 3 __0X00124B001936AC60
  bNumConfigurations      1
  Configuration Descriptor:
	bLength                 9
	bDescriptorType         2
	wTotalLength           67
	bNumInterfaces          2
	bConfigurationValue     1
	iConfiguration          0
	bmAttributes         0x80
	  (Bus Powered)
	MaxPower               50mA
	Interface Descriptor:
	  bLength                 9
	  bDescriptorType         4
	  bInterfaceNumber        0
	  bAlternateSetting       0
	  bNumEndpoints           1
	  bInterfaceClass         2 Communications
	  bInterfaceSubClass      2 Abstract (modem)
	  bInterfaceProtocol      1 AT-commands (v.25ter)
	  iInterface              0
	  CDC Header:
		bcdCDC               1.10
	  CDC ACM:
		bmCapabilities       0x02
		  line coding and serial state
	  CDC Union:
		bMasterInterface        0
		bSlaveInterface         1
	  CDC Call Management:
		bmCapabilities       0x00
		bDataInterface          1
	  Endpoint Descriptor:
		bLength                 7
		bDescriptorType         5
		bEndpointAddress     0x82  EP 2 IN
		bmAttributes            3
		  Transfer Type            Interrupt
		  Synch Type               None
		  Usage Type               Data
		wMaxPacketSize     0x0040  1x 64 bytes
		bInterval              64
	Interface Descriptor:
	  bLength                 9
	  bDescriptorType         4
	  bInterfaceNumber        1
	  bAlternateSetting       0
	  bNumEndpoints           2
	  bInterfaceClass        10 CDC Data
	  bInterfaceSubClass      0 Unused
	  bInterfaceProtocol      0
	  iInterface              0
	  Endpoint Descriptor:
		bLength                 7
		bDescriptorType         5
		bEndpointAddress     0x84  EP 4 IN
		bmAttributes            2
		  Transfer Type            Bulk
		  Synch Type               None
		  Usage Type               Data
		wMaxPacketSize     0x0040  1x 64 bytes
		bInterval               0
	  Endpoint Descriptor:
		bLength                 7
		bDescriptorType         5
		bEndpointAddress     0x04  EP 4 OUT
		bmAttributes            2
		  Transfer Type            Bulk
		  Synch Type               None
		  Usage Type               Data
		wMaxPacketSize     0x0040  1x 64 bytes
		bInterval               0
Device Status:     0x0000
  (Bus Powered)
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br></div></div></li><li><p>UDEV Rules</p><p>Create a new udev rule for serial adpater, <code>idVendor</code> and <code>idProduct</code> must be equal to values from <code>lsusb</code> command. The rule below creates device <code>/dev/zigbee-serial</code>:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;SUBSYSTEM==<span class="token entity" title="\&quot;">\&quot;</span>tty<span class="token entity" title="\&quot;">\&quot;</span>, ATTRS{idVendor}==<span class="token entity" title="\&quot;">\&quot;</span>0451<span class="token entity" title="\&quot;">\&quot;</span>, ATTRS{idProduct}==<span class="token entity" title="\&quot;">\&quot;</span>16a8<span class="token entity" title="\&quot;">\&quot;</span>, SYMLINK+=<span class="token entity" title="\&quot;">\&quot;</span>zigbee-serial<span class="token entity" title="\&quot;">\&quot;</span>,  RUN+=<span class="token entity" title="\&quot;">\&quot;</span>/usr/local/bin/docker-setup-zigbee-serial.sh<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/udev/rules.d/99-zigbee-serial.rules
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Reload newly created rule using the following command:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> udevadm control --reload-rules
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>Create docker-setup-zigbee-serial.sh</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /usr/local/bin/docker-setup-zigbee-serial.sh
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Copy the following content:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">USBDEV</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>readlink -f /dev/zigbee-serial<span class="token variable">`</span></span>
<span class="token builtin class-name">read</span> minor major <span class="token operator">&lt;</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">stat</span> -c <span class="token string">&#39;%T %t&#39;</span> <span class="token variable">$USBDEV</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -z <span class="token variable">$minor</span> <span class="token operator">||</span> -z <span class="token variable">$major</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&#39;Device not found&#39;</span>
	<span class="token builtin class-name">exit</span>
<span class="token keyword">fi</span>
<span class="token assign-left variable">dminor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span><span class="token number">0</span>x${minor}<span class="token variable">))</span></span>
<span class="token assign-left variable">dmajor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span><span class="token number">0</span>x${major}<span class="token variable">))</span></span>
<span class="token assign-left variable">CID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">docker</span> <span class="token function">ps</span> -a --no-trunc <span class="token operator">|</span> <span class="token function">grep</span> koenkk/zigbee2mqtt <span class="token operator">|</span> <span class="token function">head</span> -1 <span class="token operator">|</span>  <span class="token function">awk</span> <span class="token string">&#39;{print $1}&#39;</span><span class="token variable">`</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -z <span class="token variable">$CID</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&#39;CID not found&#39;</span>
	<span class="token builtin class-name">exit</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;Setting permissions&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;c <span class="token variable">$dmajor</span>:<span class="token variable">$dminor</span> rwm&quot;</span> <span class="token operator">&gt;</span> /sys/fs/cgroup/devices/docker/<span class="token variable">$CID</span>/devices.allow
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Set permissions:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">744</span> /usr/local/bin/docker-setup-zigbee-serial.sh
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>Create docker-event-listener.sh</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /usr/local/bin/docker-event-listener.sh
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Copy the following content:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token function">docker</span> events --filter <span class="token string">&#39;event=start&#39;</span><span class="token operator">|</span> <span class="token punctuation">\</span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> line<span class="token punctuation">;</span> <span class="token keyword">do</span>
	/usr/local/bin/docker-setup-zigbee-serial.sh
<span class="token keyword">done</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Set permissions:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">744</span> /usr/local/bin/docker-event-listener.sh
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>Create docker-event-listener.service</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/systemd/system/docker-event-listener.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Copy the following content:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Docker Event Listener <span class="token keyword">for</span> Zigbee serial adapter
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target
<span class="token assign-left variable">StartLimitIntervalSec</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>simple
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>always
<span class="token assign-left variable">RestartSec</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">User</span><span class="token operator">=</span>root
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/bin/bash /usr/local/bin/docker-event-listener.sh

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Set permissions:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">744</span> /etc/systemd/system/docker-event-listener.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Reload daemon</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Start Docker event listener</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start docker-event-listener.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Status Docker event listener</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl status docker-event-listener.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Enable Docker event listener</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> docker-event-listener.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>Verify and deploy Zigbee2MQTT stack</p><p>Now reconnect the serial adapter. Verify using the following command:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ls</span> -al /dev/zigbee-serial
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>lrwxrwxrwx <span class="token number">1</span> root root <span class="token number">7</span> Sep <span class="token number">28</span> <span class="token number">21</span>:14 /dev/zigbee-serial -<span class="token operator">&gt;</span> ttyACM0
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Below an example of a <code>docker-stack-zigbee2mqtt.yml</code>:</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.7&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">zigbee2mqtt</span><span class="token punctuation">:</span>
	<span class="token key atrule">image</span><span class="token punctuation">:</span> koenkk/zigbee2mqtt<span class="token punctuation">:</span>latest<span class="token punctuation">-</span>dev
	<span class="token key atrule">environment</span><span class="token punctuation">:</span>
	  <span class="token punctuation">-</span> TZ=Europe/Amsterdam
	<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
	  <span class="token punctuation">-</span> /mnt/docker<span class="token punctuation">-</span>cluster/zigbee2mqtt/data<span class="token punctuation">:</span>/app/data
	  <span class="token punctuation">-</span> /dev/zigbee<span class="token punctuation">-</span>serial<span class="token punctuation">:</span>/dev/zigbee<span class="token punctuation">-</span>serial
	<span class="token key atrule">networks</span><span class="token punctuation">:</span>
	  <span class="token punctuation">-</span> proxy_traefik<span class="token punctuation">-</span>net
	<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
	  <span class="token key atrule">placement</span><span class="token punctuation">:</span>
		<span class="token key atrule">constraints</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>node.hostname == rpi<span class="token punctuation">-</span><span class="token number">3</span><span class="token punctuation">]</span>
	  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">proxy_traefik-net</span><span class="token punctuation">:</span>
	<span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>In the above example, <code>proxy_traefik-net</code> is the network to connect to the mqtt broker. The constraint makes sure Docker deploys only to this (<code>rpi-3</code>) node, where the serial adapter is connected to. The volume binding <code>/mnt/docker-cluster/zigbee2mqtt/data</code> is the zigbee2mqtt persistent directory, where <code>configuration.yaml</code> is saved.</p><p>The zigbee2Zigbee2MQTTmqtt <code>configuration.yaml</code> should point to <code>/dev/zigbee-serial</code>:</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">[</span><span class="token punctuation">...</span><span class="token punctuation">]</span>
<span class="token key atrule">serial</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> /dev/zigbee<span class="token punctuation">-</span>serial
<span class="token punctuation">[</span><span class="token punctuation">...</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Deploy the stack:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> stack deploy zigbee2mqtt --compose-file docker-stack-zigbee2mqtt.yml
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ol><h3 id="troubleshooting" tabindex="-1"><a class="header-anchor" href="#troubleshooting" aria-hidden="true">#</a> Troubleshooting</h3><p>It could happen that even after the above the container is not starting correctly and bringing a &quot;Operation not permitted&quot; message in the log of the service for the device:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Error: Error while opening serialport &#39;Error: Error: Operation not permitted, cannot open /dev/zigbee-serial&#39;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>This is due to the usage of cgroupv2 instead of cgroupv1 which is not fully supported by docker/containerd. To switch from cgroupv2 to cgroupv1 you have to add <code>systemd.unified_cgroup_hierarchy=false</code> to the grub cmdline. E.g. on an Raspberry Pi 4 with Raspian Bullseye you can add it to the end of the line in the /boot/cmdline.txt file:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[...] rootfstype=ext4 fsck.repair=yes rootwait cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1 systemd.unified_cgroup_hierarchy=false
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="docker-on-synology-dsm-7-0" tabindex="-1"><a class="header-anchor" href="#docker-on-synology-dsm-7-0" aria-hidden="true">#</a> Docker on Synology DSM 7.0</h2><blockquote><p><strong><em>NOTE:</em></strong> This may not work with all Zigbee controllers, but has been tested with the CC2531.</p></blockquote><p>As of Disk Station Manager version 7, Synology removed the built-in support for USB-devices like a Zigbee controller. The USB support can be installed to the Linux kernel by issuing the following commands as <em>root</em>.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>modprobe usbserial
modprobe ftdi_sio
modprobe cdc-acm
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>After issuing the commands, the Zigbee controller may need to be unplugged and re-inserted to the USB port.</p><p>You may also need additional drivers based on your USB Zigbee controlller setup, e.g. CH341 module is not included by default. You can download precompiled modules from jadahl.com pages - select module directory based on NAS CPU architecture (DS218+ -&gt; INTEL Celeron J3355 -&gt; Apollo Lake).</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd /lib/modules
wget http://www.jadahl.com/iperf-arp-scan/DSM_7.0/apollolake/ch341.ko
insmod /lib/modules/ch341.ko
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>It is possible to create a start-up task that issues the above commands:</p><ol><li>Create an executable script file that contains the three modprobe commands.</li><li>Using DSM&#39;s <em>Control Panel</em> -&gt; <em>Task Scheduler</em> -&gt; <em>Create</em> -&gt; <em>Triggered Task</em> -&gt; <em>User-defined script</em> with the settings: <strong>User:</strong> root, <strong>Event:</strong> Boot-up, and a <code>bash</code> command executing the executable file under <em>Task Settings</em>.</li></ol><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/Koenkk/zigbee2mqtt.io/edit/master/docs/guide/installation/02_docker.md" rel="noopener noreferrer" target="_blank" aria-label=" Help to make the docu better and edit this page on Github "><!--[--><!--]-->  Help to make the docu better and edit this page on Github  <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">8/28/2022, 5:12:34 PM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev">  <a href="/guide/installation/01_linux.html" class="nav-link" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></span><span class="next"><a href="/guide/configuration/" class="nav-link" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a>  </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.25f6b4ea.js" defer></script><script src="/assets/js/84280.6395e0e8.js" defer></script><script src="/assets/js/app.edcd43a5.js" defer></script>
  </body>
</html>
